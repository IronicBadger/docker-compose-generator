# {{ ansible_managed }}

---
version: "2"
services:
{% for item in containers %}
  image: {{ item.image }}
    container_name: {{ item.container_name }}
{% if item.network_mode is defined %}
    network_mode: {{ item.network_mode }}
{% endif %}
{% if item.volumes is defined %}
    volumes:
{% for item in item.volumes %}
      - {{ item }}
{% endfor %}
{% endif %}
{% if item.ports is defined %}
    ports:
{% for item in item.ports %}
      - {{ item }}
{% endfor %}
{% endif %}
{% if item.environment is defined %}
    environment:
{% for item in item.environment %}
      - {{ item }}
{% endfor %}
{% endif %}
{% if item.restart is defined %}
    restart: {{ item.restart }}
{% endif %}
{% endfor %}
